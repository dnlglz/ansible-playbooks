- name: Set git name 
  git_config:
    name: user.name
    scope: global
    value: "{{ git_name }}"
  become: no

- name: Set git email 
  git_config:
    name: user.email
    scope: global
    value: "{{ git_email }}"
  become: no

- name: Set git default push
  git_config:
    name: push.default
    scope: global
    value: "matching"
  become: no
  
- name: Set git default editor
  git_config:
    name: core.editor
    scope: global
    value: vim
  become: no

- name: Set git color ui
  git_config:
    name: color.ui
    scope: global
    value: auto
  become: no

- name: Set vim as default editor
  lineinfile:
    dest: ~/.bashrc
    regexp: '^export EDITOR='
    line: 'export EDITOR=vim'

- name: Add cc alias
  lineinfile:
    dest: ~/.bashrc
    regexp: 'alias cc='
    line: "alias cc='cd \"$(pwd)\"'"

- name: Remove tmuxp autocomplete
  lineinfile:
    dest: ~/.bashrc
    regexp: '^.*TMUXP_COMPLETE.*' 
    line: 'eval "$(_TMUXP_COMPLETE=source tmuxp)"'
    state: absent

- name: Create or attach to tmux session
  lineinfile:
    dest: ~/.bashrc
    regexp: '^(.*)tmux -2 new-session -A -s initial(.*)'
    line: '{{ tmux }}'

- name: Set autocd in bashrc
  lineinfile:
    dest: ~/.bashrc
    regexp: 'shopt -s autocd'
    line: 'shopt -s autocd'

- name: Remove screenfetch
  lineinfile:
    dest: ~/.bashrc
    regexp: '^.*then screenfetch.*$'
    line: 'if [ -f /usr/bin/screenfetch ]; then screenfetch; fi'
    state: absent

- name: Prettier log
  git_config:
    name: alias.lg
    scope: global
    value: 'log --graph --pretty=format:"%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr, %cn)%Creset" --abbrev-commit --date=relative'

- name: Install guake
  package:
    name: guake
    state: present
  become: true

- name: Ensure ~/.pip directory exists
  file:
    path: "~/.pip"
    state: directory
  become: no

- name: Link pip.conf
  file: 
    src: "{{ role_path }}/files/pip.conf"
    dest: "~/.pip/pip.conf"
    state: link
  become: no
